# 权限系统和目录配置功能说明

## 1. 权限管理

### 问题解决
✅ 权限列表从空白变为包含72个系统权限

### 权限分类 (14个模块, 72个权限)
1. **文件管理** (15个) - 浏览/上传/编辑/编目/发布
2. **分类管理** (6个) - 浏览/创建/编辑/删除/移动
3. **目录配置** (6个) - 浏览/创建/编辑/删除/移动
4. **用户管理** (7个) - 用户CRUD和密码重置
5. **组管理** (7个) - 组CRUD和角色/分类分配
6. **角色管理** (6个) - 角色CRUD和权限分配
7. **权限管理** (2个) - 浏览权限列表
8. **级别管理** (5个) - 级别CRUD
9. **搜索** (3个) - 基本/高级搜索和重建索引
10. **转码管理** (5个) - 转码任务管理
11. **系统监控** (3个) - 健康/指标/日志
12. **系统配置** (2个) - 查看/修改配置
13. **报表统计** (2个) - 查看/导出报表
14. **个人中心** (3个) - 个人信息和密码管理

### 权限级别
- `ACL_ALL` - 所有用户
- `ACL_EDIT` - 编辑权限
- `ACL_CATALOG` - 编目权限
- `ACL_PUTOUT` - 发布权限
- `ACL_ADMIN` - 管理员权限

---

## 2. 目录配置功能

### 什么是目录配置？
**动态元数据字段配置系统** - 允许管理员为不同文件类型自定义编目表单字段。

### 为什么需要？
不同媒体需要不同元数据：
- **视频**: 导演、主演、时长、分辨率
- **音频**: 艺术家、专辑、比特率
- **图片**: 摄影师、拍摄地点、相机型号
- **文档**: 作者、关键词、页数

### 支持的字段类型
- 文本输入 (text)
- 多行文本 (textarea)
- 数字输入 (number)
- 日期选择 (date)
- 下拉选择 (select)
- 单选框 (radio)
- 复选框 (checkbox)
- 分组 (group)

### 工作流程

**管理员**:
1. 进入"目录配置"页面
2. 选择文件类型（视频/音频/图片/富媒体）
3. 添加字段并配置属性
4. 支持层级结构和拖拽排序
5. 预览表单效果

**编目员**:
1. 上传文件
2. 系统自动显示对应类型的动态表单
3. 填写元数据
4. 保存为JSON存储在 `catalog_info` 字段

### 示例配置
```
视频基本信息 (分组)
├── 标题 (文本, 必填)
├── 导演 (文本)
└── 主演 (文本)

技术参数 (分组)
├── 时长 (数字, 必填)
└── 分辨率 (下拉: 720p/1080p/4K)

制作信息 (分组)
├── 制作单位 (文本)
└── 拍摄时间 (日期)
```

### 数据存储
存储在 `ow_files.catalog_info` (JSON):
```json
{
  "director": "张艺谋",
  "duration": 120,
  "resolution": "1080p",
  "producer": "北京电影制片厂"
}
```

---

## 状态
✅ 72个权限已导入到数据库
✅ API接口正常返回权限列表
✅ 目录配置功能已实现（前端+后端）
📋 详细文档: `/home/ec2-user/openwan/docs/permissions-and-catalog-guide.md`
