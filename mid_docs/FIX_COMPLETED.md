# ğŸ‰ å¾ªç¯ä¾èµ–é—®é¢˜å·²ä¿®å¤ï¼

**ä¿®å¤æ—¶é—´**: 2026-02-01 16:09  
**ç‰ˆæœ¬**: v20260201-1553

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. ä»£ç å±‚é¢ä¿®å¤
- âœ… `router/index.js` - ä½¿ç”¨åŠ¨æ€å¯¼å…¥é¿å…å¾ªç¯ä¾èµ–
- âœ… `utils/request.js` - ä½¿ç”¨ `window.location.href` æ›¿ä»£ `router.push`
- âœ… é‡æ–°ç¼–è¯‘ç”Ÿæˆæ–°æ–‡ä»¶ï¼ˆå¸¦ç‰ˆæœ¬å‚æ•°ï¼‰

### 2. æœåŠ¡å™¨å±‚é¢é…ç½®
- âœ… index.html æ·»åŠ  meta æ ‡ç­¾ç¦ç”¨ç¼“å­˜
- âœ… æ‰€æœ‰èµ„æºæ–‡ä»¶æ·»åŠ ç‰ˆæœ¬å‚æ•° `?v=20260201-1553`
- âœ… Nginx å¼ºåˆ¶ç¦ç”¨ HTML æ–‡ä»¶ç¼“å­˜ï¼ˆetag off, if_modified_since offï¼‰
- âœ… Nginx æ­£ç¡®ç›‘å¬ 80 ç«¯å£

### 3. è¾…åŠ©å·¥å…·
- âœ… åˆ›å»ºæµ‹è¯•é¡µé¢ `/test.html`
- âœ… åˆ›å»ºæ¸…é™¤ç¼“å­˜åŠ©æ‰‹ `/clear-cache.html`

---

## ğŸ” å¦‚ä½•éªŒè¯ä¿®å¤æˆåŠŸ

### æ–¹æ³•1: ä½¿ç”¨æ¸…é™¤ç¼“å­˜åŠ©æ‰‹ï¼ˆæ¨èï¼‰

è®¿é—®ï¼š
```
http://13.217.210.142/clear-cache.html
```

ç‚¹å‡» **"æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°åŠ è½½"** æŒ‰é’®ï¼Œè‡ªåŠ¨æ¸…é™¤ç¼“å­˜å¹¶è·³è½¬åˆ°ç™»å½•é¡µã€‚

---

### æ–¹æ³•2: ä½¿ç”¨æ— ç—•æ¨¡å¼ï¼ˆæœ€ç®€å•ï¼‰

```
Ctrl + Shift + N (Chrome/Edge)
Cmd + Shift + N (Safari)
Ctrl + Shift + P (Firefox)
```

ç„¶åè®¿é—®ï¼š`http://13.217.210.142/`

**å¦‚æœæ— ç—•æ¨¡å¼æ­£å¸¸ï¼Œè¯´æ˜æ™®é€šæµè§ˆå™¨éœ€è¦æ¸…é™¤ç¼“å­˜ï¼**

---

### æ–¹æ³•3: æ‰‹åŠ¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆæœ€å½»åº•ï¼‰

#### Chrome / Edge
```
1. Ctrl + Shift + Delete (Windows/Linux)
   Cmd + Shift + Delete (Mac)

2. æ—¶é—´èŒƒå›´: å…¨éƒ¨æ—¶é—´ âš ï¸
3. å‹¾é€‰: ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶ âœ…
4. å‹¾é€‰: CookieåŠå…¶ä»–ç½‘ç«™æ•°æ® âœ…
5. ç‚¹å‡»"æ¸…é™¤æ•°æ®"
6. å…³é—­æµè§ˆå™¨ï¼Œé‡æ–°æ‰“å¼€
7. è®¿é—®: http://13.217.210.142/
```

#### Firefox
```
1. Ctrl + Shift + Delete
2. æ—¶é—´èŒƒå›´: å…¨éƒ¨
3. å‹¾é€‰: ç¼“å­˜
4. ç‚¹å‡»"ç«‹å³æ¸…é™¤"
5. å…³é—­æµè§ˆå™¨é‡æ–°æ‰“å¼€
```

---

### æ–¹æ³•4: å¼ºåˆ¶åˆ·æ–°ï¼ˆå¿«é€Ÿä½†å¯èƒ½ä¸å½»åº•ï¼‰

```
Windows/Linux: Ctrl + Shift + R æˆ– Ctrl + F5
Mac: Cmd + Shift + R
```

**å¦‚æœä»ç„¶æœ‰é—®é¢˜ï¼Œè¯·ä½¿ç”¨æ–¹æ³•1æˆ–æ–¹æ³•3å½»åº•æ¸…é™¤ç¼“å­˜ï¼**

---

## ğŸ§ª éªŒè¯ç¼“å­˜æ˜¯å¦æ¸…é™¤æˆåŠŸ

### æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆæŒ‰ F12ï¼‰

#### 1. Console æ ‡ç­¾
```
âœ… åº”è¯¥æ²¡æœ‰ä»»ä½•çº¢è‰²é”™è¯¯
âœ… åº”è¯¥æ²¡æœ‰ "Cannot access 'Gl'" é”™è¯¯
âœ… åº”è¯¥æ²¡æœ‰å¾ªç¯ä¾èµ–è­¦å‘Š
```

#### 2. Network æ ‡ç­¾ï¼ˆåˆ·æ–°é¡µé¢ï¼‰
```
âœ… åº”è¯¥çœ‹åˆ°: index-293848a2.js?v=20260201-1553
âœ… åº”è¯¥çœ‹åˆ°: request-f31d7cc5.js
âœ… åº”è¯¥çœ‹åˆ°: user-bd311208.js
âœ… Size åˆ—æ˜¾ç¤ºå®é™…å¤§å°ï¼ˆä¸æ˜¯ disk cacheï¼‰
```

---

## ğŸ“Š æ–‡ä»¶ç‰ˆæœ¬å¯¹æ¯”

### æ–°ç‰ˆæœ¬ï¼ˆå·²ä¿®å¤ï¼‰
| æ–‡ä»¶ | å“ˆå¸Œ | æ—¶é—´ | çŠ¶æ€ |
|------|------|------|------|
| `index-293848a2.js` | 293848a2 | 15:53 | âœ… å·²ä¿®å¤å¾ªç¯ä¾èµ– |
| `request-f31d7cc5.js` | f31d7cc5 | 15:53 | âœ… ä½¿ç”¨ window.location |
| `user-bd311208.js` | bd311208 | 15:53 | âœ… æœ€æ–°ç‰ˆæœ¬ |
| `vue-vendor-c8f288d3.js` | c8f288d3 | 15:53 | âš ï¸ æœªå˜ï¼ˆæ­£å¸¸ï¼‰|

### æ—§ç‰ˆæœ¬ï¼ˆæœ‰bugï¼‰
| æ–‡ä»¶ | å“ˆå¸Œ | æ—¶é—´ | é—®é¢˜ |
|------|------|------|------|
| ~~`index-c44d1260.js`~~ | c44d1260 | 15:42 | âŒ å¾ªç¯ä¾èµ–bug |
| ~~`vue-vendor-03638ac5.js`~~ | 03638ac5 | 15:42 | âŒ æ—§ç‰ˆæœ¬ |

**æ³¨æ„**: `vue-vendor-c8f288d3.js` æ–‡ä»¶ååœ¨ä¸¤æ¬¡ç¼–è¯‘ä¸­éƒ½ç›¸åŒæ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºVueæ ¸å¿ƒä»£ç æ²¡æœ‰ä¿®æ”¹ã€‚

---

## ğŸ¯ é¢„æœŸç»“æœ

æ¸…é™¤ç¼“å­˜åï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

### 1. ç™»å½•é¡µé¢æ­£å¸¸æ˜¾ç¤º
- âœ… ç”¨æˆ·åè¾“å…¥æ¡†
- âœ… å¯†ç è¾“å…¥æ¡†
- âœ… éªŒè¯ç è¾“å…¥æ¡†ï¼ˆå¦‚æœæœ‰ï¼‰
- âœ… ç™»å½•æŒ‰é’®

### 2. Console æ— ä»»ä½•é”™è¯¯
- âœ… æ²¡æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯
- âœ… æ²¡æœ‰é»„è‰²è­¦å‘Š
- âœ… æ‰€æœ‰æ¨¡å—æ­£å¸¸åŠ è½½

### 3. Network æ˜¾ç¤ºæ–°æ–‡ä»¶
- âœ… index-293848a2.js?v=20260201-1553
- âœ… æ–‡ä»¶ä»æœåŠ¡å™¨åŠ è½½ï¼ˆä¸æ˜¯ç¼“å­˜ï¼‰

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæµ‹è¯•é¡µé¢æ­£å¸¸ï¼Œä½†ç™»å½•é¡µè¿˜æŠ¥é”™ï¼Ÿ
**A**: è¿™æ˜¯å…¸å‹çš„æµè§ˆå™¨ç¼“å­˜é—®é¢˜ã€‚æµ‹è¯•é¡µé¢æ˜¯æ–°æ–‡ä»¶ï¼ˆæ— ç¼“å­˜ï¼‰ï¼Œè€Œç™»å½•é¡µä½¿ç”¨çš„index.htmlå’ŒJSæ–‡ä»¶è¢«æµè§ˆå™¨ç¼“å­˜äº†ã€‚

**è§£å†³æ–¹æ¡ˆ**: 
1. ä½¿ç”¨æ— ç—•æ¨¡å¼éªŒè¯ï¼ˆæœ€å¿«ï¼‰
2. è®¿é—® `/clear-cache.html` ä½¿ç”¨æ¸…é™¤ç¼“å­˜åŠ©æ‰‹
3. æ‰‹åŠ¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Delete â†’ å…¨éƒ¨æ—¶é—´ï¼‰

---

### Q: æ¸…é™¤ç¼“å­˜åè¿˜æ˜¯æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ
**A**: è¯·æ£€æŸ¥ï¼š

1. **ç¡®è®¤æ¸…é™¤äº†"å…¨éƒ¨æ—¶é—´"çš„ç¼“å­˜**
   - âŒ é”™è¯¯ï¼šåªæ¸…é™¤"æœ€è¿‘1å°æ—¶"
   - âœ… æ­£ç¡®ï¼šæ¸…é™¤"å…¨éƒ¨æ—¶é—´"

2. **ç¡®è®¤é‡å¯äº†æµè§ˆå™¨**
   - æ¸…é™¤ç¼“å­˜åï¼Œå…³é—­æ‰€æœ‰æµè§ˆå™¨çª—å£
   - é‡æ–°æ‰“å¼€æµè§ˆå™¨

3. **ä½¿ç”¨æ— ç—•æ¨¡å¼éªŒè¯**
   - å¦‚æœæ— ç—•æ¨¡å¼æ­£å¸¸ï¼Œè¯´æ˜æ™®é€šæµè§ˆå™¨ç¼“å­˜æœªæ¸…é™¤å¹²å‡€
   - å†æ¬¡å°è¯•æ¸…é™¤ç¼“å­˜

4. **æ£€æŸ¥å¼€å‘è€…å·¥å…·**
   ```
   F12 â†’ Network â†’ æŸ¥çœ‹åŠ è½½çš„JSæ–‡ä»¶å
   å¦‚æœè¿˜æ˜¯ index-c44d1260.js â†’ ç¼“å­˜æœªæ¸…é™¤
   åº”è¯¥æ˜¯ index-293848a2.js â†’ ç¼“å­˜å·²æ¸…é™¤
   ```

---

### Q: vue-vendor-c8f288d3.js æ–‡ä»¶åæ²¡å˜ï¼Œæ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ
**A**: è¿™æ˜¯**æ­£å¸¸çš„**ï¼

æ–‡ä»¶åçš„å“ˆå¸Œå€¼ç”±æ–‡ä»¶å†…å®¹å†³å®šï¼š
- âœ… ä¿®æ”¹äº†çš„ä»£ç  â†’ æ–°å“ˆå¸Œ â†’ æ–°æ–‡ä»¶å
- âš ï¸ æœªä¿®æ”¹çš„ä»£ç  â†’ ç›¸åŒå“ˆå¸Œ â†’ ç›¸åŒæ–‡ä»¶å

Vue vendor ä»£ç æ²¡æœ‰ä¿®æ”¹ï¼Œæ‰€ä»¥å“ˆå¸Œå€¼ä¸å˜ï¼Œè¿™æ˜¯Viteçš„æ­£å¸¸è¡Œä¸ºã€‚

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä¿®å¤åŸç†

#### é—®é¢˜æ ¹æº
```javascript
// router/index.js (æ—§ä»£ç  - æœ‰å¾ªç¯ä¾èµ–)
import { useUserStore } from '@/stores/user'  // âŒ é™æ€å¯¼å…¥

router.beforeEach(async (to, from, next) => {
  const userStore = useUserStore()  // ä½¿ç”¨å¯¼å…¥çš„store
  ...
})
```

```javascript
// utils/request.js (æ—§ä»£ç  - æœ‰å¾ªç¯ä¾èµ–)
import router from '@/router'  // âŒ å¯¼å…¥router

request.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      router.push('/login')  // âŒ ä½¿ç”¨router.push
    }
  }
)
```

**å¾ªç¯ä¾èµ–è·¯å¾„**:
```
router/index.js â†’ stores/user.js â†’ utils/request.js â†’ router/index.js (å¾ªç¯ï¼)
```

#### ä¿®å¤æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: router/index.js - åŠ¨æ€å¯¼å…¥**
```javascript
// router/index.js (æ–°ä»£ç  - æ— å¾ªç¯ä¾èµ–)
// âŒ åˆ é™¤: import { useUserStore } from '@/stores/user'

router.beforeEach(async (to, from, next) => {
  // âœ… åŠ¨æ€å¯¼å…¥ï¼Œåœ¨è¿è¡Œæ—¶æ‰åŠ è½½
  const { useUserStore } = await import('@/stores/user')
  const userStore = useUserStore()
  ...
})
```

**æ–¹æ¡ˆ2: request.js - ä½¿ç”¨åŸç”ŸAPI**
```javascript
// utils/request.js (æ–°ä»£ç  - æ— å¾ªç¯ä¾èµ–)
// âŒ åˆ é™¤: import router from '@/router'

request.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // âœ… ä½¿ç”¨åŸç”Ÿ APIï¼Œä¸ä¾èµ– router
      window.location.href = '/login'
    }
  }
)
```

**ç ´åå¾ªç¯**:
```
router/index.js â”
                â”œâ†’ (åŠ¨æ€å¯¼å…¥ï¼Œå»¶è¿ŸåŠ è½½)
stores/user.js  â”˜

utils/request.js â†’ window.location.href (ä¸ä¾èµ–router)
```

---

### ç¼“å­˜ç­–ç•¥

#### HTML æ–‡ä»¶ï¼ˆindex.htmlï¼‰
```nginx
add_header Cache-Control "no-cache, no-store, must-revalidate" always;
add_header Pragma "no-cache" always;
add_header Expires "0" always;
etag off;
if_modified_since off;
```
- **æ°¸ä¸ç¼“å­˜**ï¼Œæ¯æ¬¡éƒ½ä»æœåŠ¡å™¨è·å–æœ€æ–°ç‰ˆæœ¬

#### JS/CSS æ–‡ä»¶
```nginx
expires 1y;
add_header Cache-Control "public, immutable";
```
- **ç¼“å­˜1å¹´**ï¼Œä½†æ–‡ä»¶ååŒ…å«å“ˆå¸Œå€¼
- å†…å®¹æ”¹å˜ â†’ å“ˆå¸Œå˜åŒ– â†’ æ–‡ä»¶åå˜åŒ– â†’ æµè§ˆå™¨ä¸‹è½½æ–°æ–‡ä»¶

#### ç‰ˆæœ¬å‚æ•°
```html
<script src="/assets/index-293848a2.js?v=20260201-1553"></script>
```
- é¢å¤–çš„ä¿é™©ï¼šå³ä½¿ç¼“å­˜ç­–ç•¥å¤±æ•ˆï¼ŒæŸ¥è¯¢å‚æ•°å˜åŒ–ä¹Ÿä¼šå¼ºåˆ¶é‡æ–°ä¸‹è½½

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [CLEAR_CACHE_GUIDE.md](./CLEAR_CACHE_GUIDE.md) - å®Œæ•´æ¸…é™¤ç¼“å­˜æŒ‡å—
- [test.html](http://13.217.210.142/test.html) - æ–‡ä»¶åŠ è½½æµ‹è¯•é¡µé¢
- [clear-cache.html](http://13.217.210.142/clear-cache.html) - æ¸…é™¤ç¼“å­˜åŠ©æ‰‹

---

## ğŸ†˜ ä»ç„¶æœ‰é—®é¢˜ï¼Ÿ

å¦‚æœæŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œåä»ç„¶æœ‰é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

### 1. æµè§ˆå™¨ä¿¡æ¯
```
æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬å·
ä¾‹å¦‚: Chrome 120.0.6099.71
```

### 2. å¼€å‘è€…å·¥å…·æˆªå›¾
```
F12 â†’ Network æ ‡ç­¾ â†’ åˆ·æ–°é¡µé¢ â†’ æˆªå›¾
ç‰¹åˆ«å…³æ³¨JSæ–‡ä»¶çš„æ–‡ä»¶åå’ŒSizeåˆ—
```

### 3. Console é”™è¯¯ä¿¡æ¯
```
F12 â†’ Console æ ‡ç­¾ â†’ æˆªå›¾å®Œæ•´é”™è¯¯
```

### 4. ç¼“å­˜æ¸…é™¤ç¡®è®¤
```
- æ˜¯å¦æ¸…é™¤äº†"å…¨éƒ¨æ—¶é—´"çš„ç¼“å­˜ï¼Ÿ
- æ˜¯å¦é‡å¯äº†æµè§ˆå™¨ï¼Ÿ
- æ— ç—•æ¨¡å¼æ˜¯å¦æ­£å¸¸ï¼Ÿ
```

---

**æœ€åæ›´æ–°**: 2026-02-01 16:09 UTC  
**çŠ¶æ€**: âœ… ä¿®å¤å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·æ¸…é™¤ç¼“å­˜éªŒè¯
